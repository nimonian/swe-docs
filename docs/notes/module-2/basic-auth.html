<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Securing APIs with Basic Auth | SWE 2.0</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.6.96/css/materialdesignicons.min.css">
    <meta name="description" content="Documentation for SWE 2.0">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.7b02d6e4.css" as="style"><link rel="preload" href="/assets/js/app.fdcd5113.js" as="script"><link rel="preload" href="/assets/js/2.da368b61.js" as="script"><link rel="preload" href="/assets/js/19.bea94ec4.js" as="script"><link rel="prefetch" href="/assets/js/10.aef4f5db.js"><link rel="prefetch" href="/assets/js/11.131cdaf7.js"><link rel="prefetch" href="/assets/js/12.41e8b4af.js"><link rel="prefetch" href="/assets/js/13.4c361092.js"><link rel="prefetch" href="/assets/js/14.3cb010b7.js"><link rel="prefetch" href="/assets/js/15.84cb7d41.js"><link rel="prefetch" href="/assets/js/16.73a58dec.js"><link rel="prefetch" href="/assets/js/17.1e2a3b6f.js"><link rel="prefetch" href="/assets/js/18.ecc9bd54.js"><link rel="prefetch" href="/assets/js/20.15cbc73c.js"><link rel="prefetch" href="/assets/js/21.72adbcf8.js"><link rel="prefetch" href="/assets/js/3.efd1d24e.js"><link rel="prefetch" href="/assets/js/4.66006680.js"><link rel="prefetch" href="/assets/js/5.68481791.js"><link rel="prefetch" href="/assets/js/6.7f86ac42.js"><link rel="prefetch" href="/assets/js/7.7208f546.js"><link rel="prefetch" href="/assets/js/8.ae1faefc.js"><link rel="prefetch" href="/assets/js/9.93901f70.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b02d6e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">SWE 2.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/notes/bootcamp/" class="sidebar-heading clickable"><span>Bootcamp</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/bootcamp/objects.html" class="sidebar-link">Objects</a></li><li><a href="/notes/bootcamp/classes.html" class="sidebar-link">Classes</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/notes/module-2/" class="sidebar-heading clickable router-link-active open"><span>Module 2</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/module-2/rest.html" class="sidebar-link">REST APIs</a></li><li><a href="/notes/module-2/basic-auth.html" aria-current="page" class="active sidebar-link">Securing APIs with Basic Auth</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#on-the-frontend" class="sidebar-link">On the frontend</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#encoding-to-base-64-in-dev-tools" class="sidebar-link">Encoding to Base 64 in dev tools</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#encoding-to-base-64-in-node" class="sidebar-link">Encoding to Base 64 in Node</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#using-the-authorization-basic-header" class="sidebar-link">Using the Authorization: Basic header</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#on-the-backend" class="sidebar-link">On the backend</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#the-basic-auth-package" class="sidebar-link">The basic-auth package</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#using-middleware" class="sidebar-link">Using middleware</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#hashing-and-salting" class="sidebar-link">Hashing and salting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#hashing-functions" class="sidebar-link">Hashing functions</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#hashing-passwords" class="sidebar-link">Hashing passwords</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#hashing-alone-isn-t-enough" class="sidebar-link">Hashing alone isn't enough</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#salting" class="sidebar-link">Salting</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#bcrypt" class="sidebar-link">bcrypt</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#assignment-improving-cloudbox" class="sidebar-link">üì¶ Assignment: Improving Cloudbox</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/basic-auth.html#add-hashing-and-salting" class="sidebar-link">Add hashing and salting</a></li></ul></li></ul></li><li><a href="/notes/module-2/jwt.html" class="sidebar-link">Javascript Web Tokens</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="securing-apis-with-basic-auth"><a href="#securing-apis-with-basic-auth" class="header-anchor">#</a> Securing APIs with Basic Auth</h1> <h2 id="on-the-frontend"><a href="#on-the-frontend" class="header-anchor">#</a> On the frontend</h2> <p>Basic Auth requires a user to send their username and password to the server in order to access protected resources.</p> <p>The first thing for us to understand, is how to encode in Base 64.</p> <h3 id="encoding-to-base-64-in-dev-tools"><a href="#encoding-to-base-64-in-dev-tools" class="header-anchor">#</a> Encoding to Base 64 in dev tools</h3> <p>If you open developer tools in your browser, you can use</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">btoa</span><span class="token punctuation">(</span><span class="token string">'My cool string!'</span><span class="token punctuation">)</span>
<span class="token comment">// 'TXkgY29vbCBzdHJpbmch'</span>
</code></pre></div><p>to get the Base 64 encoding, and then</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">atob</span><span class="token punctuation">(</span><span class="token string">'TXkgY29vbCBzdHJpbmch'</span><span class="token punctuation">)</span>
<span class="token comment">// 'My cool string!'</span>
</code></pre></div><p>to get it back.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Question: What is brown and sticky?</p> <p>Answer: QSBzdGljayE</p></div> <h3 id="encoding-to-base-64-in-node"><a href="#encoding-to-base-64-in-node" class="header-anchor">#</a> Encoding to Base 64 in Node</h3> <p>We don't have access to <code>atob()</code> in Node. It's a bit more complicated, but we can do it like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// To encode in Base 64:</span>
<span class="token keyword">const</span> encoded <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'Admit it...'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'base64'</span><span class="token punctuation">)</span>
<span class="token comment">// To decode again:</span>
<span class="token keyword">const</span> decoded <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'eW91IGxhdWdoZWQgYXQgdGhlIHN0aWNrIGpva2U='</span><span class="token punctuation">,</span> <span class="token string">'base64'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Question: What do you call a deer with no eyes?</p> <p>Answer: Tm8gaWRlYS4uLg</p> <p>ü§£</p></div> <h3 id="using-the-authorization-basic-header"><a href="#using-the-authorization-basic-header" class="header-anchor">#</a> Using the Authorization: Basic header</h3> <p>Let's suppose the user <code>mickey_m</code> has password <code>HeyPluto!123</code>. In order to send the user's credentials to our api on the backend, we would encode the string <code>mickey_m:HeyPluto!123</code> in Base 64 and then send it in the <code>Authorization</code> header of a POST request. If you're using the Fetch API, here's how the <code>headers</code> object would look</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'Authorization'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token string">'mickey_m:HeyPluto!123'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>where <code>toBase64</code> is a function you would need to write using what we've learned about <code>Buffer</code> above.</p> <h2 id="on-the-backend"><a href="#on-the-backend" class="header-anchor">#</a> On the backend</h2> <h3 id="the-basic-auth-package"><a href="#the-basic-auth-package" class="header-anchor">#</a> The basic-auth package</h3> <p>Let's suppose an api endpoint <code>api/v1/secrets</code> should be only accessible by authenticated users. If we send a request to this endpoint with the basic authorization header, we can retrieve it from the <code>req</code> object in the backend. There is a useful module called <a href="https://www.npmjs.com/package/basic-auth" target="_blank" rel="noopener noreferrer">basic-auth<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which can help parse the username and password</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> basicAuth <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'basic-auth'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/secrets'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">basicAuth</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
  <span class="token comment">// Now user.name and user.pass are available</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can then check whether the password matches the one in our database.</p> <h3 id="using-middleware"><a href="#using-middleware" class="header-anchor">#</a> Using middleware</h3> <p>If would be annoying to have to write the code which parses and checks the password in every endpoint that needs protecting. To help with that, we can write a <strong>middleware</strong> function.</p> <p>Here's an example of a stupid middleware:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">woohoo</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>woo <span class="token operator">=</span> <span class="token string">'hoo!'</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then, on some endpoint, we could write</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/some/endpoint'</span><span class="token punctuation">,</span> woohoo<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>woo<span class="token punctuation">)</span> <span class="token comment">// =&gt; 'hoo!'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can put the <code>woohoo</code> function onto any endpoint we like.</p> <p>You can imagine we could write a middleware function called <code>authenticate</code> which we drop in to any endpoint which requires protection. The <code>authenticate</code> function would make sure the user exists and make sure the password is correct before calling <code>next()</code> so the endpoint can continue processing.</p> <h2 id="hashing-and-salting"><a href="#hashing-and-salting" class="header-anchor">#</a> Hashing and salting</h2> <h3 id="hashing-functions"><a href="#hashing-functions" class="header-anchor">#</a> Hashing functions</h3> <p>It is a bad idea to save passwords in your database. If somebody hacked the database, the users would lose their accounts forever (you'd have to deactivate their account, but they how do they prove who they are to reacivate it?). Instead, we <strong>hash</strong> the password. A hash is a function which takes some data and scrambles it in a particular way:</p> <ul><li>the same data will always result in the same hash</li> <li>if you know the hash, it is infeasible to get the data back</li> <li>all hashes have the same length regardless of the data size</li> <li>a small change in the data will completely change the hash</li></ul> <p>Think of the hash of some data as being like the fingerprint of the data: it's much smaller, but effectively unique.</p> <details class="custom-block details"><summary>DETAILS</summary> <p>There are more possible different data than there are hashes. Let's say our hash function hashes data into strings of length 64. There are more possible data inputs than there are strings of length 64, and therefore there must be some data inputs that would result in the same hash. This is called a <strong>collision</strong>. But, in practice, there are an <em>overwhelmingly large</em> number of strings of length 64. You cannot even imagine how big this number is. So the likelihood of ever having a collision that causes problems is very, very small.</p></details> <h3 id="hashing-passwords"><a href="#hashing-passwords" class="header-anchor">#</a> Hashing passwords</h3> <p>Before storing the user's password on the server, we could hash it. Then, when the user sends us their password, we could hash it using the same algorithm and check it matches the hash in our database. If the hashes match, we know they gave us the right password.</p> <h3 id="hashing-alone-isn-t-enough"><a href="#hashing-alone-isn-t-enough" class="header-anchor">#</a> Hashing alone isn't enough</h3> <p>The problem with this is, if hackers got our database, they could look at all the hashes and see if any of the users have the same hash. If they do, it's probably a common string like <code>password123</code>. They can experiment a bit and eventually compromise some accounts.</p> <p>Also, if they got our hashes, they could simply google the hash. Lots of people have spent lots of time hashing various words and phrases using all the popular hashing functions. Hackers can even download a <em>rainbow table</em>, which is a huge database of common phrases and their hashes with various algorithms.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Try googling <code>482c811da5d5b4bc6d497ffa98491e38</code></p></div> <h3 id="salting"><a href="#salting" class="header-anchor">#</a> Salting</h3> <p>The solution is to add a string of 10 or so random characters onto the password before hashing. This random string is called a <strong>salt</strong>. This means that even if two users have the same password, their salted hash will be different.</p> <h3 id="bcrypt"><a href="#bcrypt" class="header-anchor">#</a> bcrypt</h3> <p>The npm library <a href="https://www.npmjs.com/package/bcrypt" target="_blank" rel="noopener noreferrer">bcrypt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> uses a powerful hashing algorithm and is recommended for use in modern applications. It is called <code>bcrypt</code> because the algorithm used to hash is called the <em>blowfish</em> algorithm: blowfish + cryptography = bcrypt. Here is how we use it:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> bcrypt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcrypt'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> saltLength <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token string">'GetPwnd5000'</span>

<span class="token keyword">const</span> hash <span class="token operator">=</span> bcrypt<span class="token punctuation">.</span><span class="token function">hashSync</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> saltLength<span class="token punctuation">)</span>
<span class="token comment">// $2b$10$EMX0KBM5mRJLCHxClch1ieB5lCJnNmDf1tBIxFpjBsUzE6IQb87Wy</span>
</code></pre></div><p>And to check if the password is correct:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> passwordMatches <span class="token operator">=</span> bcrypt<span class="token punctuation">.</span><span class="token function">compareSync</span><span class="token punctuation">(</span><span class="token string">'GetPwnd5000'</span><span class="token punctuation">,</span> <span class="token string">'$2b$10$EMX0KBM5mRJLCHxClch1ieB5lCJnNmDf1tBIxFpjBsUzE6IQb87Wy'</span><span class="token punctuation">)</span>
<span class="token comment">// true</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Rather than <code>.hashSync()</code> and <code>.compareSync()</code>, you should use the async versions of these methods <code>.hash()</code> and <code>.compare()</code>. bcrypt's algorithm is cpu intensive, and using async will start the process on a separate thread and thus will not block your server from processing further incoming requests.</p></div> <details class="custom-block details"><summary>DETAILS</summary> <p>You might be wondering - if the salt is random, how can bcrypt compare the password to the saved hash? Look carefully at the hash: <code>$2b$10$EMX0KBM5mRJLCHxClch1ieB5lCJnNmDf1tBIxFpjBsUzE6IQb87Wy</code></p> <p>At the beginning, you see <code>$2b$10$</code> - this tells bcrypt that the <code>2b</code> algorithm was used with <code>10</code> salt characters. The first 22 characters of the remaining string <code>EMX0KBM5mRJLCHxClch1ie</code> are a radix-64 encoding of the salt, and the remaining part <code>B5lCJnNmDf1tBIxFpjBsUzE6IQb87Wy</code> is the actual hash.</p> <p>You might wonder <em>isn't storing the salt dangerous?</em> The answer is no - <a href="https://stackoverflow.com/a/215165" target="_blank" rel="noopener noreferrer">hiding the salt is unnecessary<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></details> <h2 id="assignment-improving-cloudbox"><a href="#assignment-improving-cloudbox" class="header-anchor">#</a> üì¶ Assignment: Improving Cloudbox</h2> <h3 id="add-hashing-and-salting"><a href="#add-hashing-and-salting" class="header-anchor">#</a> Add hashing and salting</h3> <ul><li>Use bcrypt to hash and salt the password whenever a user is created. Replace all existing users' passwords with salted hashes.</li> <li>Refactor your frontend code so that it no longer sends username and password in the body, but correctly encodes and includes it in the basic auth header.</li> <li>Refactor your protected endpoints to use bcrypt's compare method.</li> <li>In doing the above, it is a very good idea to extract all of this logic into a middleware called <code>authorize</code> - whenever a user wants to use a protected endpoint, they have to supply their username and password in the basic auth header and the authorize middleware will extract and compare it before responding.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/notes/module-2/rest.html" class="prev">
        REST APIs
      </a></span> <span class="next"><a href="/notes/module-2/jwt.html">
        Javascript Web Tokens
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fdcd5113.js" defer></script><script src="/assets/js/2.da368b61.js" defer></script><script src="/assets/js/19.bea94ec4.js" defer></script>
  </body>
</html>
