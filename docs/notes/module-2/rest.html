<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>REST APIs | SWE 2.0</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.6.96/css/materialdesignicons.min.css">
    <meta name="description" content="Documentation for SWE 2.0">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.7b02d6e4.css" as="style"><link rel="preload" href="/assets/js/app.fdcd5113.js" as="script"><link rel="preload" href="/assets/js/2.da368b61.js" as="script"><link rel="preload" href="/assets/js/21.72adbcf8.js" as="script"><link rel="preload" href="/assets/js/6.7f86ac42.js" as="script"><link rel="prefetch" href="/assets/js/10.aef4f5db.js"><link rel="prefetch" href="/assets/js/11.131cdaf7.js"><link rel="prefetch" href="/assets/js/12.41e8b4af.js"><link rel="prefetch" href="/assets/js/13.4c361092.js"><link rel="prefetch" href="/assets/js/14.3cb010b7.js"><link rel="prefetch" href="/assets/js/15.84cb7d41.js"><link rel="prefetch" href="/assets/js/16.73a58dec.js"><link rel="prefetch" href="/assets/js/17.1e2a3b6f.js"><link rel="prefetch" href="/assets/js/18.ecc9bd54.js"><link rel="prefetch" href="/assets/js/19.bea94ec4.js"><link rel="prefetch" href="/assets/js/20.15cbc73c.js"><link rel="prefetch" href="/assets/js/3.efd1d24e.js"><link rel="prefetch" href="/assets/js/4.66006680.js"><link rel="prefetch" href="/assets/js/5.68481791.js"><link rel="prefetch" href="/assets/js/7.7208f546.js"><link rel="prefetch" href="/assets/js/8.ae1faefc.js"><link rel="prefetch" href="/assets/js/9.93901f70.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b02d6e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">SWE 2.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/notes/bootcamp/" class="sidebar-heading clickable"><span>Bootcamp</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/bootcamp/objects.html" class="sidebar-link">Objects</a></li><li><a href="/notes/bootcamp/classes.html" class="sidebar-link">Classes</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/notes/module-2/" class="sidebar-heading clickable router-link-active open"><span>Module 2</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/module-2/rest.html" aria-current="page" class="active sidebar-link">REST APIs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/rest.html#assignment-cloudbox" class="sidebar-link">📦 Assignment: Cloudbox</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/module-2/rest.html#user-story" class="sidebar-link">User story</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/rest.html#set-up" class="sidebar-link">Set up</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/rest.html#account-creation" class="sidebar-link">Account creation</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/rest.html#document-handling" class="sidebar-link">Document handling</a></li><li class="sidebar-sub-header"><a href="/notes/module-2/rest.html#extension-query-params" class="sidebar-link">Extension: Query params</a></li></ul></li></ul></li><li><a href="/notes/module-2/basic-auth.html" class="sidebar-link">Securing APIs with Basic Auth</a></li><li><a href="/notes/module-2/jwt.html" class="sidebar-link">Javascript Web Tokens</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rest-apis"><a href="#rest-apis" class="header-anchor">#</a> REST APIs</h1> <p><a href="https://si-mv.github.io/slides/multiverse/2-1-1-rest-apis.html#/" target="_blank" rel="noopener noreferrer">Slides<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>REST = Representational State Transfer</li> <li>REST is an <em>architectural style</em> which emphasises interacting with data with http requests to url endpoints</li> <li>API = Application Programming Interface - it's a way of interacting with an app with code</li> <li>The four main http methods which roughly correspond to CRUD are GET (read), POST (create), PUT (update), DELETE (delete)</li> <li>The most common status codes are</li></ul> <table><thead><tr><th style="text-align:center;">Code</th> <th>Meaning</th></tr></thead> <tbody><tr><td style="text-align:center;">200</td> <td>Success</td></tr> <tr><td style="text-align:center;">201</td> <td>Created successfuly</td></tr> <tr><td style="text-align:center;">400</td> <td>Invalid request</td></tr> <tr><td style="text-align:center;">401</td> <td>Failed to authenticate</td></tr> <tr><td style="text-align:center;">403</td> <td>Action is forbidden to this user</td></tr> <tr><td style="text-align:center;">404</td> <td>Resource not found</td></tr> <tr><td style="text-align:center;">500</td> <td>Internal server error</td></tr> <tr><td style="text-align:center;">503</td> <td>Service unavailable</td></tr></tbody></table> <ul><li>REST API endpoints should be nouns not verbs, and should be consistent. <code>getImage?id=a6r7p</code> is bad; <code>GET images/a6r7p</code> is good.</li></ul> <h2 id="assignment-cloudbox"><a href="#assignment-cloudbox" class="header-anchor">#</a> 📦 Assignment: Cloudbox</h2> <p>We will build Cloudbox - a storage provider for user text documents. Cloudbox plans to become a megacorporation and have identity and data for millions of users. They expose a REST API for users to interact with their data. They hired an engineer to build an MVP. That engineer is you!</p> <p>We will build the authentication system poorly at first - just storing the passwords as plaintext, and requiring a user to send their password with every request to a protected endpoint. (Building it badly will help you appreciate the problems associated with auth - please don't replicate these practices in real-world applications!)</p> <h3 id="user-story"><a href="#user-story" class="header-anchor">#</a> User story</h3> <table><thead><tr><th style="text-align:center;">As a...</th> <th>I can...</th> <th>so that...</th> <th style="text-align:center;">Status</th></tr></thead> <tbody><tr><td style="text-align:center;">user</td> <td>create an account with a <code>username</code> and <code>password</code></td> <td>I can sign in securely</td> <td style="text-align:center;"><span class="mdi mdi-checkbox-blank-outline" data-v-ab140df8></span></td></tr> <tr><td style="text-align:center;">user</td> <td>edit my account details</td> <td>I control my identity and keep my account secure</td> <td style="text-align:center;"><span class="mdi mdi-checkbox-blank-outline" data-v-ab140df8></span></td></tr> <tr><td style="text-align:center;">user</td> <td>create a document with text, timestamp and author</td> <td>I can save my files on the server</td> <td style="text-align:center;"><span class="mdi mdi-checkbox-blank-outline" data-v-ab140df8></span></td></tr> <tr><td style="text-align:center;">user</td> <td>edit my own docs</td> <td>I can change their content</td> <td style="text-align:center;"><span class="mdi mdi-checkbox-blank-outline" data-v-ab140df8></span></td></tr> <tr><td style="text-align:center;">user</td> <td>delete my own docs</td> <td>I can remove my data from the server</td> <td style="text-align:center;"><span class="mdi mdi-checkbox-blank-outline" data-v-ab140df8></span></td></tr> <tr><td style="text-align:center;">user</td> <td>delete my account and all associated data</td> <td>I exercise my GDPR right to be forgotten</td> <td style="text-align:center;"><span class="mdi mdi-checkbox-blank-outline" data-v-ab140df8></span></td></tr></tbody></table> <h3 id="set-up"><a href="#set-up" class="header-anchor">#</a> Set up</h3> <ul><li>Fork the template on GitHub and <code>npm install</code> on your machine.</li> <li>Have a look around the template and make note of the Todos.</li> <li>Install the REST Client plugin for VS Code and skim the docs so you know how it works.</li></ul> <h3 id="account-creation"><a href="#account-creation" class="header-anchor">#</a> Account creation</h3> <ul><li>Set up a <code>POST /auth/user</code> end-point which expects a username, password, firstName, secondName, email. If the username is not in use, create the user and save their details in the <code>users</code> array. Send the appropriate status codes in response.</li> <li>Ensure that the server assigns a <code>uid</code> to each newly created user (you could use <a href="https://www.npmjs.com/package/nanoid" target="_blank" rel="noopener noreferrer">nanoid<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</li> <li>Set up a <code>GET /auth/user/:uid</code> which expects a username and password combination for the user with the given uid. If it matches, respond with the user entry from the <code>user</code> array, <em>but not the password</em>.</li> <li>Test your endpoints with the REST Client plugin (or Postman) by POSTing a new user and then GETting them.</li> <li>Set up a <code>PUT /auth/user/:id</code> which can update the user's information, including username and password (now you see why the uid is so important!).</li> <li>Test your endpoint by PUTing a user and GETting them.</li> <li>Set up a <code>DELETE /auth/user/:id</code> endpoint which deletes the user.</li></ul> <h3 id="document-handling"><a href="#document-handling" class="header-anchor">#</a> Document handling</h3> <ul><li>Set up endpoints for GET, POST, PUT and DELETE on <code>/api/docs</code>.</li> <li>Make sure you send the correct codes, and protect GET, PUT and DELETE requests by requiring the user to send their username and password with each request.</li></ul> <h3 id="extension-query-params"><a href="#extension-query-params" class="header-anchor">#</a> Extension: Query params</h3> <ul><li>Modify your <code>GET /api/docs/:id</code> endpoint to allow a query parameter <code>?contains=</code> which accepts a string and returns any doc which contains that string within its content.</li> <li>Allow another query param of <code>&amp;sort=</code> which sorts the docs by the time they were created. The values of <code>sort</code> can be <code>asc</code> for ascending or <code>desc</code> for descending. You will need to modify your <code>POST /api/docs</code> to include a timestamp when the doc is saved (you could use <code>Date.now()</code>).</li> <li>Allow another query param of <code>&amp;limit=</code>. This is an integer which determines how many docs are sent in response.</li> <li>Finally, add a <code>&amp;cursor=</code> query param, and integer which determines how many documents to skip before they are returned. Together with <code>sort</code> and <code>limit</code>, this will allow front-end devs to build <strong>pagination</strong>.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/bootcamp/classes.html" class="prev">
        Classes
      </a></span> <span class="next"><a href="/notes/module-2/basic-auth.html">
        Securing APIs with Basic Auth
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fdcd5113.js" defer></script><script src="/assets/js/2.da368b61.js" defer></script><script src="/assets/js/21.72adbcf8.js" defer></script><script src="/assets/js/6.7f86ac42.js" defer></script>
  </body>
</html>
